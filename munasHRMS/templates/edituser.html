{% extends 'index.html' %}
{% block scripthead %}

<script>
    response_code = parseInt("{{response_code}}")
    response_message = "{{response_message}}"
    {% if response_code == 200 %}
    console.log({{response_data|tojson}})
    // document.location = "/home"

    {% endif %}
    {% if response_code == 4003 %}
    alert(`Validation Failed \n` + `{{ response_data| tojson}}`)
    console.log({{ response_data| tojson}})
    {% elif response_code != 200 %}
    alert(`Error \n` + `{{ response_message}}`)
    {% endif %}

</script>
{% endblock %}
{% block content %}





<!-- ============================================================== -->
<!-- Start right Content here -->
<!-- ============================================================== -->
<div class="content-page">
    <!-- Start content -->
    <div class="content">
        <div class="container">


            <div class="row">
                <div class="col-xs-12">
                    <div class="page-title-box">
                        <h4 class="page-title">Edit User</h4>
                        <div class="clearfix"></div>
                    </div>
                </div>
            </div>
            <!-- end row -->


            <div class="row">
                <div class="col-sm-12">
                    <div class="card-box">
                        <div class="row">
                            <form class="form-horizontal" action="/update" method="POST">
                                <input type="hidden" class="form-control" name="id"
                                    placeholder="Id" value="{{response_data.user.id}}" required>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label class="col-md-2 control-label">Name*</label>
                                        <div class="col-md-10">
                                            <input type="text" class="form-control" name="name"
                                                placeholder="Name" value="{{response_data.user.name}}" required>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-md-2 control-label">Email</label>
                                        <div class="col-md-10">
                                            <input type="email" class="form-control" name="email_address"
                                                placeholder="Email" value="{{response_data.user.email_address}}" required>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-md-2 control-label">Phone Number</label>
                                        <div class="col-md-10">
                                            <input type="text" class="form-control" name="phone_number"
                                                placeholder="Phone Number" value="{{response_data.user.phone_number}}" required>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-md-2 control-label">CNIC</label>
                                        <div class="col-md-10">
                                            <input type="text" class="form-control" name="nic"
                                                placeholder="CNIC" value="{{response_data.user.nic}}" required>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-md-2 control-label">Gender</label>
                                        <div class="col-md-10">
                                            <input type="text" class="form-control" name="gender"
                                                placeholder="Gender" value="{{response_data.user.gender}}" required>
                                        </div>
                                    </div>
                                    <div class="col-xs-5">
                                        <div class="form-group">
                                          <label class="col-sm-5 control-label">Organizations</label>
                                          <select class="form-control" name="organization" title="Organization">
                                              <option value="{{response_data.user.organization.id}}">{{response_data.user.organization.name}}</option>
                                            {% for organization in response_data['organizations'] %}
                                                <option value="{{organization['id']}}">{{organization['name']}}</option>
                                            {% endfor %}
                                          </select>
                                        </div>
                                      </div>

                                      <div class="col-xs-5">
                                        <div class="form-group">
                                          <label class="col-sm-5 control-label">Manager</label>
                                          <select class="form-control" name="manager" title="assigned_to">
                                              <option value="{{response_data.user.manager.id}}">{{response_data.user.manager.name}}</option>
                                            {% for user in response_data['all-users'] %}
                                                <option value="{{user.id}}">{{user.name}}</option>
                                            {% endfor %}
                                          </select>
                                        </div>
                                      </div>
                                     
                                      <div class="col-xs-5">
                                        <div class="form-group">
                                          <label class="col-sm-5 control-label">Roles</label>
                                          <select class="form-control" name="role" title="assigned_to">
                                              <option value="{{response_data.user.role.user_role_id - 1}}">{{response_data.user.role.name}}</option>
                                            
                                            {% for role in response_data['roles'] %}
                                                <option value="{{role.id}}">{{role.title}}</option>
                                            {% endfor %}
                                            
                                          </select>
                                        </div>
                                      </div>




                                </div>
                                <input class="btn btn-default" type="submit" value="Save">
                            </form>
                        </div>
                    </div>
                </div>
            </div>
            <!-- end row -->


        </div> <!-- container -->

    </div> <!-- content -->



</div>

{% endblock %}